"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[287],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>m});var i=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var c=i.createContext({}),s=function(e){var n=i.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},p=function(e){var n=s(e.components);return i.createElement(c.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},g=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(t),g=r,m=u["".concat(c,".").concat(g)]||u[g]||d[g]||o;return t?i.createElement(m,a(a({ref:n},p),{},{components:t})):i.createElement(m,a({ref:n},p))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,a=new Array(o);a[0]=g;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l[u]="string"==typeof e?e:r,a[1]=l;for(var s=2;s<o;s++)a[s]=t[s];return i.createElement.apply(null,a)}return i.createElement.apply(null,t)}g.displayName="MDXCreateElement"},5692:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>s});var i=t(7462),r=(t(7294),t(3905));t(8209);const o={},a="Golang bindings",l={unversionedId:"icicle/golang-bindings",id:"icicle/golang-bindings",title:"Golang bindings",description:"Golang bindings allow you to use ICICLE as a Golang library.",source:"@site/docs/icicle/golang-bindings.md",sourceDirName:"icicle",slug:"/icicle/golang-bindings",permalink:"/icicle/golang-bindings",editUrl:"https://github.com/ingonyama-zk/developer-docs/docs/icicle/golang-bindings.md",tags:[],version:"current",lastUpdatedBy:"ImmanuelSegol",lastUpdatedAt:1704114210,formattedLastUpdatedAt:"1/1/2024",frontMatter:{},sidebar:"GettingStartedSidebar",previous:{title:"Integrations",permalink:"/icicle/integrations"},next:{title:"Rust bindings",permalink:"/icicle/rust-bindings"}},c={},s=[{value:"Using ICICLE Golang bindings in your project",id:"using-icicle-golang-bindings-in-your-project",level:2},{value:"Common issues",id:"common-issues",level:2},{value:"Cannot find static library",id:"cannot-find-static-library",level:3}],p={toc:s},u="wrapper";function d(e){let{components:n,...t}=e;return(0,r.kt)(u,(0,i.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"golang-bindings"},"Golang bindings"),(0,r.kt)("p",null,"Golang bindings allow you to use ICICLE as a Golang library."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"curves")," directory contains implementations for every supported curve. Each curve is its own package and includes all the required primitives and methods. There is no need to import all curves into your project, only the ones your project requires."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"goicicle.go")," contains wrappers for CUDA memory allocation methods."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"templates")," contains scripts to generate new packages for new curves, so if you ever want to add support for a new curve you can generate it based off these templates."),(0,r.kt)("h2",{id:"using-icicle-golang-bindings-in-your-project"},"Using ICICLE Golang bindings in your project"),(0,r.kt)("p",null,"Too add ICICLE to your ",(0,r.kt)("inlineCode",{parentName:"p"},"go.mod")," file. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"go get github.com/ingonyama-zk/icicle/goicicle\n")),(0,r.kt)("p",null,"If you want to specify a specific branch"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"go get github.com/ingonyama-zk/icicle/goicicle@<branch_name>\n")),(0,r.kt)("p",null,"For a specific commit"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"go get github.com/ingonyama-zk/icicle/goicicle@<commit_id>\n")),(0,r.kt)("p",null,"While this will add the ICICLE library to your project you sill need to build the static library, using our ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/ingonyama-zk/icicle/blob/main/goicicle/Makefile"},"make file"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"make libbn254.so\n")),(0,r.kt)("p",null,"The current supported options are ",(0,r.kt)("inlineCode",{parentName:"p"},"libbn254.so"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"libbls12_381.so"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"libbls12_377.so"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"libbw6_671.so")," and all to compile all curves. The resulting .so files are the compiled static libraries for each curve."),(0,r.kt)("p",null,"Once the static library has been built"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"export LD_LIBRARY_PATH=$LD_LIBRARY_PATH/<path_to_shared_libs>\n")),(0,r.kt)("p",null,"Now you should be able to run your ICICLE program as usual."),(0,r.kt)("h1",{id:"how-do-the-golang-bindings-work"},"How do the Golang bindings work?"),(0,r.kt)("p",null,"The static libraries produced from the CUDA code compilation are used to bind Golang to ICICLE's CUDA code."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"These static libraries (",(0,r.kt)("inlineCode",{parentName:"p"},"libbn254.so"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"libbls12_381.so"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"libbls12_377.so"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"libbw6_671.so"),") can be imported in your Go project to leverage the GPU accelerated functionalities provided by ICICLE.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"In your Go project, you can use ",(0,r.kt)("inlineCode",{parentName:"p"},"cgo")," to link these static libraries. Here's a basic example on how you can use ",(0,r.kt)("inlineCode",{parentName:"p"},"cgo")," to link these libraries:"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-go"},'/*\n#cgo LDFLAGS: -L/path/to/shared/libs -lbn254 -lbls12_381 -lbls12_377 -lbw6_671\n#include "icicle.h" // make sure you use the correct header file(s)\n*/\nimport "C"\n\nfunc main() {\n    // Now you can call the C functions from the ICICLE libraries.\n    // Note that C function calls are prefixed with \'C.\' in Go code.\n}\n')),(0,r.kt)("p",null,"Replace ",(0,r.kt)("inlineCode",{parentName:"p"},"/path/to/shared/libs")," with the actual path where the static libraries are located on your system."),(0,r.kt)("h2",{id:"common-issues"},"Common issues"),(0,r.kt)("h3",{id:"cannot-find-static-library"},"Cannot find static library"),(0,r.kt)("p",null,"In some cases you may encounter the following error, despite exporting the correct ",(0,r.kt)("inlineCode",{parentName:"p"},"LD_LIBRARY_PATH"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"/usr/local/go/pkg/tool/linux_amd64/link: running gcc failed: exit status 1\n/usr/bin/ld: cannot find -lbn254: No such file or directory\n/usr/bin/ld: cannot find -lbn254: No such file or directory\n/usr/bin/ld: cannot find -lbn254: No such file or directory\n/usr/bin/ld: cannot find -lbn254: No such file or directory\n/usr/bin/ld: cannot find -lbn254: No such file or directory\ncollect2: error: ld returned 1 exit status\n")),(0,r.kt)("p",null,"This is normally fixed by exporting the path to the static library location in the following way: ",(0,r.kt)("inlineCode",{parentName:"p"},'export CGO_LDFLAGS="-L/<path_to_shared_lib>/"')))}d.isMDXComponent=!0},8209:(e,n,t)=>{t(7294)}}]);